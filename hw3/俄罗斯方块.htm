
<!-- saved from url=(0066)http://www.sharejs.com/uploadfiles/2012/06/01/133848937167128.html -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=GBK">
    <meta name="description" content="100lines only Tetris">
    <meta content="100lines only Tetris·" name="keywords">

    <style>
    .c {margin :1px;width:19px;height:19px;background:red;position:absolute;}
    .d {margin :1px;width:19px;height:19px;background:gray;position:absolute;}
    .f {top:0px;left:0px;background:black;position:absolute;}
    </style>
</head>

<body>
<script src="./¶íÂÞË¹·½¿é_files/ca-pub-0652501482160045.js"></script>
<script>
    var over=false;
    var shapes=("0,1,1,1,2,1,3,1;1,0,1,1,1,2,2,2;2,0,2,1,2,2,1,2;0,1,1,1,1,2,2,2;1,2,2,2,2,1,3,1;1,1,2,1,1,2,2,2;0,2,1,2,1,1,2,2").split(";");
    
    function create(tag,css){
        var elm=document.createElement(tag);
        elm.className = css;
        document.body.appendChild(elm);
        return elm;}
    
    function Tetris(c, t, x, y){
        var c=c?c:"c";
        this.divs = [create("div",c),create("div",c),create("div",c),create("div",c)];
        this.reset = function(){
            this.x = typeof x != 'undefined'?x:3;
            this.y = typeof y != 'undefined'?y:0;
            this.shape = t?t:shapes[Math.floor(Math.random()*(shapes.length-0.00001))].split(",");
            this.show();
            if(this.field&&this.field.check(this.shape,this.x,this.y,'v')=='D'){
                over=true;
                this.field.fixShape(this.shape,this.x,this.y);
                alert('game over');}}
        this.show = function(){
            for(var i in this.divs){
                this.divs[i].style.left = (this.shape[i*2]*1+this.x)*20+'px';
                this.divs[i].style.top = (this.shape[i*2+1]*1+this.y)*20+'px';}}
        this.field=null;
        this.hMove = function(step){
            var r = this.field.check(this.shape,this.x- -step,this.y,'h');
            if(r!='N'&&r==0){
                this.x-=-step;
                this.show();}}
        this.vMove = function(){
            if(this.field.check(this.shape,this.x,this.y- -1,'v')=='N'){
                this.y++;
                this.show();}
            else{
                this.field.fixShape(this.shape,this.x,this.y);
                this.field.findFull();
                this.reset();}}
        this.rotate = function(){
            var s=this.shape;
            var newShape=[3-s[1],s[0],3-s[3],s[2],3-s[5],s[4],3-s[7],s[6]];
            var r = this.field.check(newShape,this.x,this.y,'h');
            if(r=='D')return;
            if(r==0){
                this.shape=newShape;
                this.show();}
            else if(this.field.check(newShape,this.x-r,this.y,'h')==0){
                this.x-=r;
                this.shape=newShape;
                this.show();}}
        this.reset();}
    
    function Field(w,h){
        this.width = w?w:10;
        this.height = h?h:20;
        this.show = function(){
            var f = create("div","f")
            f.style.width=this.width*20+'px';
            f.style.height=this.height*20+'px';}
        this.findFull = function(){
            for(var l=0;l<this.height;l++){
                var s=0;
                for(var i=0;i<this.width;i++){
                    s+=this[l*this.width+i]?1:0;}
                if(s==this.width){
                    this.removeLine(l);}}}
        this.removeLine = function(line){
            for(var i=0;i<this.width;i++){
                document.body.removeChild(this[line*this.width+i]);}
            for(var l=line;l>0;l--){
                for(var i=0;i<this.width;i++){
                    this[l*this.width- -i]=this[(l-1)*this.width- -i];
                    if(this[l*this.width- -i])this[l*this.width- -i].style.top = l*20+'px';}}}
        this.check = function(shape, x, y, d){
            var r1=0,r2='N';
            for(var i=0;i<8;i+=2){
                if(shape[i]- -x < 0 && shape[i]- -x <r1)
                    {r1 = shape[i]- -x;}
                else if(shape[i]- -x>=this.width && shape[i]- -x>r1)
                    {r1 = shape[i]- -x;}
                if(shape[i+1]- -y>=this.height || this[shape[i]- -x- -(shape[i+1]- -y)*this.width])
                    {r2='D'}}
            if(d=='h'&&r2=='N')return r1>0?r1-this.width- -1:r1;
            else return r2;}
        this.fixShape = function(shape,x,y){
            var d=new Tetris("d",shape,x,y);
            d.show();
            for(var i=0;i<8;i+=2){
                this[shape[i]- -x- -(shape[i+1]- -y)*this.width]=d.divs[i/2];}}}
    var f = new Field();
    f.show();
    var s = new Tetris();
    s.field = f;
    s.show();
    window.setInterval("if(!over)s.vMove();",500);
    document.onkeydown = function(e){
        if(over)return;
        var e = window.event ? window.event : e;
        switch(e.keyCode){
        case 38: //up
            s.rotate();
            break;
        case 40: //down
            s.vMove();
            break;
        case 37: //left
            s.hMove(-1);
            break;
        case 39: //right
            s.hMove(1);
            break;}}
</script>

<div class="f" style="width: 200px; height: 400px;"></div>
<div class="c" style="left: 60px; top: 40px;"></div>
<div class="c" style="left: 80px; top: 40px;"></div>
<div class="c" style="left: 80px; top: 20px;"></div>
<div class="c" style="left: 100px; top: 40px;"></div>
<div style="clear:both"></div>
<br>
<br>

<div align="center">

<script language="javascript" src="./¶íÂÞË¹·½¿é_files/720.js"></script><script type="text/javascript">
<!--
google_ad_client = "pub-0652501482160045";
/* 728x90, Â´Â´Â½Â¨Ã“Ãš 08-12-25 */
google_ad_slot = "3889147664";
google_ad_width = 728;
google_ad_height = 90;
//-->

</script>

<script type="text/javascript" src="./¶íÂÞË¹·½¿é_files/show_ads.js">
</script>
<ins id="aswift_0_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent">
<ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent">
<iframe width="728" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;" src="./¶íÂÞË¹·½¿é_files/saved_resource.html">
    
</iframe>
</ins>
</ins>

<br>
<br>
<br>
</div>
<div class="d" style="left: 60px; top: 360px;"></div>
<div class="d" style="left: 80px; top: 360px;"></div>
<div class="d" style="left: 80px; top: 380px;"></div>
<div class="d" style="left: 100px; top: 380px;"></div>
<div class="d" style="left: 180px; top: 320px;"></div>
<div class="d" style="left: 180px; top: 340px;"></div>
<div class="d" style="left: 180px; top: 360px;"></div>
<div class="d" style="left: 180px; top: 380px;"></div>
<div class="d" style="left: 120px; top: 380px;"></div>
<div class="d" style="left: 120px; top: 360px;"></div>
<div class="d" style="left: 100px; top: 360px;"></div>
<div class="d" style="left: 120px; top: 340px;"></div>
<div class="d" style="left: 140px; top: 360px;"></div>
<div class="d" style="left: 160px; top: 360px;"></div>
<div class="d" style="left: 140px; top: 380px;"></div>
<div class="d" style="left: 160px; top: 380px;"></div>
<div class="d" style="left: 80px; top: 320px;"></div>
<div class="d" style="left: 100px; top: 320px;"></div>
<div class="d" style="left: 80px; top: 340px;"></div>
<div class="d" style="left: 100px; top: 340px;"></div>
<div class="d" style="left: 80px; top: 260px;"></div>
<div class="d" style="left: 80px; top: 280px;"></div>
<div class="d" style="left: 80px; top: 300px;"></div>
<div class="d" style="left: 100px; top: 300px;"></div>
<div class="d" style="left: 60px; top: 220px;"></div>
<div class="d" style="left: 80px; top: 220px;"></div>
<div class="d" style="left: 80px; top: 240px;"></div>
<div class="d" style="left: 100px; top: 240px;"></div>
<div class="d" style="left: 60px; top: 200px;"></div>
<div class="d" style="left: 80px; top: 200px;"></div>
<div class="d" style="left: 80px; top: 180px;"></div>
<div class="d" style="left: 100px; top: 200px;"></div><div class="d" style="left: 60px; top: 140px;"></div><div class="d" style="left: 80px; top: 140px;"></div><div class="d" style="left: 80px; top: 160px;"></div><div class="d" style="left: 100px; top: 160px;"></div><div class="d" style="left: 60px; top: 120px;"></div><div class="d" style="left: 80px; top: 120px;"></div><div class="d" style="left: 100px; top: 120px;"></div><div class="d" style="left: 120px; top: 120px;"></div><div class="d" style="left: 80px; top: 60px;"></div><div class="d" style="left: 80px; top: 80px;"></div><div class="d" style="left: 80px; top: 100px;"></div><div class="d" style="left: 100px; top: 100px;"></div><div class="d" style="left: 60px; top: 40px;"></div><div class="d" style="left: 80px; top: 40px;"></div><div class="d" style="left: 100px; top: 40px;"></div><div class="d" style="left: 120px; top: 40px;"></div><div class="d" style="left: 60px; top: 40px;"></div><div class="d" style="left: 80px; top: 40px;"></div><div class="d" style="left: 80px; top: 20px;"></div><div class="d" style="left: 100px; top: 40px;"></div></body></html>